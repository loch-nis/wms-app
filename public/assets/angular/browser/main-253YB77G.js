import{a as U}from"./chunk-GJJEXYUA.js";import{a as ve,b as C}from"./chunk-T7MMBD4M.js";import{a as he,c as fe,d as _e,e as ge}from"./chunk-DQFC7UUZ.js";import{a as ye,b as be}from"./chunk-W7WXRJEA.js";import{a as Ie}from"./chunk-VJJHPCLK.js";import{E as Y,G as D,M as B,k as Me,v as I,w as Te,x as we,y as Ce}from"./chunk-T3OGVFXZ.js";import{a as pe}from"./chunk-LAM6RKH7.js";import{o as de,p as ue}from"./chunk-TS2YMWJE.js";import{D as M,Nb as g,O as R,Oa as m,Ob as J,Pb as le,R as y,S as ne,U as Q,V as S,X as T,Y as K,Yb as ce,Z as r,Za as w,_ as oe,_a as x,c as L,eb as H,f as F,ga as f,ib as j,jc as me,kb as V,l as b,mb as Z,nb as $,o as v,ob as se,qb as re,rb as ae,sb as _,tb as l,ub as c,vb as p,w as h,x as W,z as N,zb as q}from"./chunk-B42WC262.js";import{a as A}from"./chunk-4IDNTCH7.js";var De=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadComponent:()=>import("./chunk-ZHEIDPVA.js").then(e=>e.HomeComponent)},{path:"about",loadComponent:()=>import("./chunk-A3C2BJNT.js").then(e=>e.AboutComponent)},{path:"hike-planner",canActivate:[U],loadChildren:()=>import("./chunk-DD65LNXM.js").then(e=>e.hikePlannerRoutes)},{path:"ware-management",canActivate:[U],loadComponent:()=>import("./chunk-VV3ICEA6.js").then(e=>e.WareManagementContainerComponent)},{path:"stats",canActivate:[U],loadComponent:()=>import("./chunk-BSWZLVXU.js").then(e=>e.StatsContainerComponent)},{path:"auth",loadChildren:()=>import("./chunk-PQSPIWIE.js").then(e=>e.authRoutes)},{path:"**",redirectTo:"home"}];var Ee=(e,o)=>{let t=r(C),n=r(ve).getToken();return n&&(e=e.clone({setHeaders:{Authorization:`Bearer ${n}`}})),o(e).pipe(N(s=>{if(["/auth/"].some(u=>e.url.includes(u)))return b(()=>s);switch(s.status){case 401:return t.logout(),b(()=>s)}return b(()=>s)}))};var Pe=(e,o)=>{let t=r(Ie);return o(e).pipe(N(i=>(i.status===0&&t.showError("Unable to connect to the server. Is the backend running?"),b(()=>i))))};var ee="Service workers are disabled or not supported by this browser",E=class{serviceWorker;worker;registration;events;constructor(o,t){if(this.serviceWorker=o,!o)this.worker=this.events=this.registration=new L(i=>i.error(new y(5601,!1)));else{let i=null,n=new F;this.worker=new L(d=>(i!==null&&d.next(i),n.subscribe(O=>d.next(O))));let s=()=>{let{controller:d}=o;d!==null&&(i=d,n.next(i))};o.addEventListener("controllerchange",s),s(),this.registration=this.worker.pipe(R(()=>o.getRegistration().then(d=>{if(!d)throw new y(5601,!1);return d})));let a=new F;this.events=a.asObservable();let u=d=>{let{data:O}=d;O?.type&&a.next(O)};o.addEventListener("message",u),t?.get(V,null,{optional:!0})?.onDestroy(()=>{o.removeEventListener("controllerchange",s),o.removeEventListener("message",u)})}}postMessage(o,t){return new Promise(i=>{this.worker.pipe(M(1)).subscribe(n=>{n.postMessage(A({action:o},t)),i()})})}postMessageWithOperation(o,t,i){let n=this.waitForOperationCompleted(i),s=this.postMessage(o,t);return Promise.all([s,n]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(o){let t;return typeof o=="string"?t=i=>i.type===o:t=i=>o.includes(i.type),this.events.pipe(W(t))}nextEventOfType(o){return this.eventsOfType(o).pipe(M(1))}waitForOperationCompleted(o){return new Promise((t,i)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(W(n=>n.nonce===o),M(1),v(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).subscribe({next:t,error:i})})}get isEnabled(){return!!this.serviceWorker}},He=(()=>{class e{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new F;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=h,this.notificationClicks=h,this.notificationCloses=h,this.pushSubscriptionChanges=h,this.subscription=h;return}this.messages=this.sw.eventsOfType("PUSH").pipe(v(n=>n.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(v(n=>n.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(v(n=>n.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(v(n=>n.data)),this.pushManager=this.sw.registration.pipe(v(n=>n.pushManager));let i=this.pushManager.pipe(R(n=>n.getSubscription()));this.subscription=new L(n=>{let s=i.subscribe(n),a=this.subscriptionChanges.subscribe(n);return()=>{s.unsubscribe(),a.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(ee));let i={userVisibleOnly:!0},n=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(n.length));for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return i.applicationServerKey=s,new Promise((a,u)=>{this.pushManager.pipe(R(P=>P.subscribe(i)),M(1)).subscribe({next:P=>{this.subscriptionChanges.next(P),a(P)},error:u})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(ee));let t=i=>{if(i===null)throw new y(5602,!1);return i.unsubscribe().then(n=>{if(!n)throw new y(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((i,n)=>{this.subscription.pipe(M(1),R(t)).subscribe({next:i,error:n})})}decodeBase64(t){return atob(t)}static \u0275fac=function(i){return new(i||e)(K(E))};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})(),je=(()=>{class e{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=h,this.unrecoverable=h;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(ee));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new y(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(i){return new(i||e)(K(E))};static \u0275prov=Q({token:e,factory:e.\u0275fac})}return e})();var Se=new T("");function Ve(){let e=r(k);if(!("serviceWorker"in navigator&&e.enabled!==!1))return;let o=r(Se),t=r(H),i=r(V);t.runOutsideAngular(()=>{let n=navigator.serviceWorker,s=()=>n.controller?.postMessage({action:"INITIALIZE"});n.addEventListener("controllerchange",s),i.onDestroy(()=>{n.removeEventListener("controllerchange",s)})}),t.runOutsideAngular(()=>{let n,{registrationStrategy:s}=e;if(typeof s=="function")n=new Promise(a=>s().subscribe(()=>a()));else{let[a,...u]=(s||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":n=Promise.resolve();break;case"registerWithDelay":n=Re(+u[0]||0);break;case"registerWhenStable":n=Promise.race([i.whenStable(),Re(+u[0])]);break;default:throw new y(5600,!1)}}n.then(()=>{i.destroyed||navigator.serviceWorker.register(o,{scope:e.scope,updateViaCache:e.updateViaCache,type:e.type}).catch(a=>console.error(ne(5604,!1)))})})}function Re(e){return new Promise(o=>setTimeout(o,e))}function Ue(e,o){return new E(e.enabled!==!1?navigator.serviceWorker:void 0,o)}var k=class{enabled;updateViaCache;type;scope;registrationStrategy};function xe(e,o={}){return oe([He,je,{provide:Se,useValue:e},{provide:k,useValue:o},{provide:E,useFactory:Ue,deps:[k,f]},j(Ve)])}var ke={providers:[ce({eventCoalescing:!0}),ge(De),de(ue([Ee,Pe])),j(()=>{r(C).loadUserFromToken()}),xe("ngsw-worker.js",{enabled:!me(),registrationStrategy:"registerWhenStable:30000"})]};var ot=new T("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let e=r(f);return()=>D(e)}});function st(e){let o=r(f);return()=>D(o)}var rt={provide:ot,deps:[],useFactory:st};var Oe=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=x({type:e});static \u0275inj=S({providers:[rt],imports:[Te,I,B,Y,I]})}return e})(),Ae={transformMenu:{type:7,name:"transformMenu",definitions:[{type:0,name:"void",styles:{type:6,styles:{opacity:0,transform:"scale(0.8)"},offset:null}},{type:1,expr:"void => enter",animation:{type:4,styles:{type:6,styles:{opacity:1,transform:"scale(1)"},offset:null},timings:"120ms cubic-bezier(0, 0, 0.2, 1)"},options:null},{type:1,expr:"* => void",animation:{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"100ms 25ms linear"},options:null}],options:{}},fadeInItems:{type:7,name:"fadeInItems",definitions:[{type:0,name:"showing",styles:{type:6,styles:{opacity:1},offset:null}},{type:1,expr:"void => *",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:null,timings:"400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"}],options:null}],options:{}}},fi=Ae.fadeInItems,_i=Ae.transformMenu;var te=20;var Le=new T("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let e=r(f);return()=>D(e,{scrollThrottle:te})}});function Fe(e){let o=r(f);return()=>D(o,{scrollThrottle:te})}var Ne={provide:Le,deps:[],useFactory:Fe};var ie=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=x({type:e});static \u0275inj=S({providers:[Ne],imports:[Me,B,I,I,Y]})}return e})();function lt(e,o){if(e&1&&(l(0,"a",8,0),p(2,"fa-icon",9),l(3,"span",10),g(4),c()()),e&2){let t=o.$implicit;_("routerLink",t.link)("color","error"),m(2),_("icon",t.icon),m(2),J(t.label)}}function ct(e,o){if(e&1&&(l(0,"h2",11),g(1),c(),l(2,"a",12),p(3,"fa-icon",9),l(4,"span",10),g(5,"Logout"),c()()),e&2){let t,i=q();m(),le(" Hello, ",(t=i.authUser())==null?null:t.first_name," \u2600\uFE0F "),m(2),_("icon","sign-out-alt")}}function mt(e,o){e&1&&(l(0,"a",13),p(1,"fa-icon",9),l(2,"span",10),g(3,"Login"),c()(),p(4,"div",6),l(5,"a",14),p(6,"fa-icon",9),l(7,"span",10),g(8,"Register"),c()()),e&2&&(m(),_("icon","sign-in-alt"),m(5),_("icon","user"))}var G=class e{authService=r(C);authUser=this.authService.authUser;menuItems=[{link:"/",label:"Home",icon:"home"},{link:"/about",label:"About",icon:"info-circle"},{link:"/ware-management",label:"Ware Management",icon:"truck"},{link:"/stats",label:"Statistics",icon:"chart-simple"},{link:"/hike-planner",label:"Hike Planner",icon:"tree"}];static \u0275fac=function(t){return new(t||e)};static \u0275cmp=w({type:e,selectors:[["app-header"]],decls:13,vars:1,consts:[["rla","routerLinkActive"],[1,"bg-gray-50","shadow-lg","py-2.5"],[1,"px-6","flex","items-center","justify-between"],[1,"flex","items-center","space-x-4"],["routerLink","/",1,"flex","items-center","space-x-4"],[1,"text-4xl","font-semibold","text-gray-800"],[1,"border-l","border-gray-300","h-14"],[1,"menu-items","flex","items-center"],["mat-button","","routerLinkActive","active",1,"flex","items-center",3,"routerLink","color"],[3,"icon"],[1,"ml-2"],[1,"text-2xl","font-semibold","text-gray-800"],["mat-stroked-button","","routerLink","/auth/logout",1,"flex","items-center"],["mat-stroked-button","","routerLink","/auth/login",1,"flex","items-center"],["mat-stroked-button","","routerLink","/auth/register",1,"flex","items-center"]],template:function(t,i){t&1&&(l(0,"header",1)(1,"div",2)(2,"div",3)(3,"a",4)(4,"h1",5),g(5,"\u{1F400} Warehouse"),c()(),p(6,"div",6),l(7,"div",7),re(8,lt,5,4,"a",8,se),c()(),l(10,"div",3),Z(11,ct,6,2)(12,mt,9,2),c()()()),t&2&&(m(8),ae(i.menuItems),m(3),$(i.authUser()!==void 0?11:12))},dependencies:[fe,_e,Ce,we,Oe,ie,be,ye],encapsulation:2})};var X=class e{title="frontend";static \u0275fac=function(t){return new(t||e)};static \u0275cmp=w({type:e,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"content"],[1,"main-content"]],template:function(t,i){t&1&&(l(0,"div",0),p(1,"app-header"),l(2,"div",1)(3,"main"),p(4,"router-outlet"),c()()())},dependencies:[he,G],encapsulation:2})};pe(X,ke).catch(e=>console.error(e));
