import{b as k,d as w,f as U,g as E,h as ae,i as A,j as L,k as R,l as D,m as Q,n as ie,o as me,p as se,q as le,r as pe,s as ue,t as j,u as ce,v as M,w as de}from"./chunk-5WDFAQTY.js";import{a as fe,b as be}from"./chunk-W7WXRJEA.js";import{a as ge}from"./chunk-VJJHPCLK.js";import"./chunk-T3OGVFXZ.js";import{a as Y}from"./chunk-ILNOYJRC.js";import"./chunk-LAM6RKH7.js";import{n as oe,q as P}from"./chunk-TS2YMWJE.js";import{$b as O,Nb as i,Oa as m,Ob as _,Pb as y,Q as W,Rb as f,Sb as b,Tb as g,U as ee,Z as I,Za as u,ac as ne,fc as s,ic as V,ma as te,mb as v,nb as x,pb as re,qb as q,rb as B,sb as d,tb as n,ub as t,vb as l,yb as F,zb as h}from"./chunk-B42WC262.js";import"./chunk-4IDNTCH7.js";function Ce(r,a){r&1&&(n(0,"button",3),i(1,"Store ware(s)"),t())}function We(r,a){r&1&&(n(0,"button",4),i(1,"Pack ware(s)"),t())}var N=class r{barcode=s("");action=s("increaseQuantity");submitFunction=s(()=>{});quantityDelta=1;onSubmit(){this.submitFunction()(this.action(),this.barcode(),this.quantityDelta)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-update-ware-form"]],inputs:{barcode:[1,"barcode"],action:[1,"action"],submitFunction:[1,"submitFunction"]},decls:5,vars:2,consts:[[1,"space-y-2","p-2",3,"ngSubmit"],[1,"flex","flex-col"],["type","number","min","1","max","1000","id","quantityDelta","name","quantityDelta","required","",1,"text-center","w-full","py-2","px-3","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","py-2","bg-green-600","text-white","shadow-sm","font-semibold","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","transition","ease-in-out","duration-150"],["type","submit",1,"w-full","py-2","bg-blue-400","text-white","shadow-sm","font-semibold","rounded-lg","hover:bg-orange-700","focus:outline-none","focus:ring-2","focus:ring-orange-500","transition","ease-in-out","duration-150"]],template:function(e,o){e&1&&(n(0,"form",0),F("ngSubmit",function(){return o.onSubmit()}),n(1,"div",1)(2,"input",2),g("ngModelChange",function(p){return b(o.quantityDelta,p)||(o.quantityDelta=p),p}),t()(),v(3,Ce,2,0,"button",3)(4,We,2,0,"button",4),t()),e&2&&(m(2),f("ngModel",o.quantityDelta),m(),x(o.action()==="increaseQuantity"?3:o.action()==="decreaseQuantity"?4:-1))},dependencies:[M,D,k,Q,U,E,ce,j,ue,R,A],encapsulation:2})};var G=class r{barcode=s("");submitFunction=s(()=>{});onSubmit(){this.submitFunction()(this.barcode())}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-ware-delete-button"]],inputs:{barcode:[1,"barcode"],submitFunction:[1,"submitFunction"]},decls:3,vars:0,consts:[[3,"ngSubmit"],["type","submit",1,"w-full","py-2","bg-orange-400","shadow-sm","text-white","font-semibold","rounded-lg","hover:bg-orange-700","focus:outline-none","focus:ring-2","focus:ring-orange-500","transition","ease-in-out","duration-150"]],template:function(e,o){e&1&&(n(0,"form",0),F("ngSubmit",function(){return o.onSubmit()}),n(1,"button",1),i(2,"Delete ware"),t()())},dependencies:[M,D,E,A],encapsulation:2})};var he=(r,a)=>a.barcode;function ye(r,a){if(r&1&&(n(0,"tr")(1,"td"),i(2),t(),n(3,"td"),i(4),t(),n(5,"td"),i(6),t(),n(7,"td"),i(8),t(),n(9,"td"),l(10,"app-update-ware-form",5),t(),n(11,"td"),l(12,"app-ware-delete-button",6),t()()),r&2){let e=a.$implicit,o=h();m(2),_(e.name),m(2),_(e.barcode),m(2),y(" $",e.price),m(2),_(e.quantity),m(2),d("action","decreaseQuantity")("barcode",e.barcode)("submitFunction",o.submitWareUpdateFunction()),m(2),d("barcode",e.barcode)("submitFunction",o.submitWareDeleteFunction())}}function Se(r,a){r&1&&(n(0,"div"),i(1," No wares found in database. Possible error. "),t())}var $=class r{wareList=s([]);submitWareUpdateFunction=s(()=>{});submitWareDeleteFunction=s(()=>{});static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-ware-list"]],inputs:{wareList:[1,"wareList"],submitWareUpdateFunction:[1,"submitWareUpdateFunction"],submitWareDeleteFunction:[1,"submitWareDeleteFunction"]},decls:21,vars:1,consts:[[1,"text-xl","font-semibold","text-gray-800","mb-4","mt-4"],[1,"min-w-full","w-3xl","table-auto","border-collapse","bg-white","shadow-md"],[1,"bg-gray-200"],[1,"w-1/5"],[1,"text-m"],[3,"action","barcode","submitFunction"],[3,"barcode","submitFunction"]],template:function(e,o){e&1&&(n(0,"h3",0),i(1,` List of wares in warehouse:
`),t(),n(2,"table",1)(3,"thead",2)(4,"tr")(5,"th"),i(6,"Name"),t(),n(7,"th"),i(8,"Barcode"),t(),n(9,"th"),i(10,"Price"),t(),n(11,"th"),i(12,"Quantity"),t(),n(13,"th",3),i(14,"Number of wares to pack"),t(),n(15,"th"),i(16,"Delete"),t()()(),n(17,"tbody",4),q(18,ye,13,9,"tr",null,he,!1,Se,2,0,"div"),t()()),e&2&&(m(18),B(o.wareList()))},dependencies:[N,G],styles:["th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;border:1px solid #333}"]})};var H=class r{barcode=V("");static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-barcode-form"]],inputs:{barcode:[1,"barcode"]},outputs:{barcode:"barcodeChange"},decls:1,vars:1,consts:[["type","text","id","barcode","autofocus","","autocomplete","off","placeholder","Enter barcode",1,"flex","text-center","w-full","max-w-md","px-4","py-2","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","placeholder-gray-400",3,"ngModelChange","ngModel"]],template:function(e,o){e&1&&(n(0,"input",0),g("ngModelChange",function(p){return b(o.barcode,p)||(o.barcode=p),p}),t()),e&2&&f("ngModel",o.barcode)},dependencies:[M,k,U,R],encapsulation:2})};function ve(r,a){if(r&1&&(n(0,"option",12),i(1),t()),r&2){let e=a.$implicit;d("value",e),m(),_(e)}}var z=class r{barcode=s("");submitFunction=s(()=>{});syncBarcodeField=ne(()=>{this.form.patchValue({barcode:this.barcode()})});placementOptions=[1,2,3,4,5];form=new ae({barcode:new L("",w.required),name:new L("",w.required),price:new L(null,[w.required,w.min(0)]),placement_id:new L(1,w.required),quantity:new L(0,[w.required,w.min(0)])});onSubmit(){this.form.invalid||this.submitFunction()(this.form.value)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-create-ware-form"]],inputs:{barcode:[1,"barcode"],submitFunction:[1,"submitFunction"]},decls:28,vars:1,consts:[[1,"form-container","max-w-lg","mx-auto","p-6","bg-white","rounded-lg","shadow-md","mb-2"],[3,"ngSubmit","formGroup"],[1,"form-field","mb-1"],["for","barcode"],["type","text","id","barcode","formControlName","barcode",1,"mt-2","w-full","text-center","px-2","py-1","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["for","name"],["type","text","id","name","formControlName","name",1,"mt-2","w-full","text-center","px-2","py-1","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["for","price"],["type","number","id","price","formControlName","price","step","0.1",1,"mt-2","w-full","text-center","px-2","py-1","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["for","placement_id"],["id","placement_id","formControlName","placement_id",1,"mt-2","w-full","text-center","px-2","py-1","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value","","disabled",""],[3,"value"],["for","quantity"],["type","number","id","quantity","formControlName","quantity","min","0",1,"mt-2","w-full","text-center","px-2","py-1","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["type","submit",1,"w-full","mt-2","py-2","bg-blue-600","text-white","font-semibold","rounded-lg","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-blue-500","transition","ease-in-out","duration-150"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"form",1),F("ngSubmit",function(){return o.onSubmit()}),n(2,"div",2)(3,"label",3),i(4,"Barcode:"),t(),l(5,"input",4),t(),n(6,"div",2)(7,"label",5),i(8,"Name:"),t(),l(9,"input",6),t(),n(10,"div",2)(11,"label",7),i(12,"Price:"),t(),l(13,"input",8),t(),n(14,"div",2)(15,"label",9),i(16,"Placement:"),t(),n(17,"select",10)(18,"option",11),i(19,"Select placement"),t(),q(20,ve,2,2,"option",12,re),t()(),n(22,"div",2)(23,"label",13),i(24,"Quantity:"),t(),l(25,"input",14),t(),n(26,"button",15),i(27," Create ware "),t()()()),e&2&&(m(),d("formGroup",o.form),m(19),B(o.placementOptions))},dependencies:[de,D,le,pe,k,Q,se,U,E,j,ie,me],encapsulation:2})};function xe(r,a){if(r&1&&(n(0,"div"),i(1),l(2,"br"),i(3),l(4,"br"),i(5),l(6,"br"),i(7),l(8,"br"),t()),r&2){let e,o,c,p,T=h();m(),y(" Name: ",(e=T.lookedUpWare())==null?null:e.name," "),m(2),y(" Barcode: ",(o=T.lookedUpWare())==null?null:o.barcode," "),m(2),y(" Price: $",(c=T.lookedUpWare())==null?null:c.price," "),m(2),y(" Quantity: ",(p=T.lookedUpWare())==null?null:p.quantity," ")}}var J=class r{lookedUpWare=s(null);wareLookupStatus=s("notSearched");static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-ware-item"]],inputs:{lookedUpWare:[1,"lookedUpWare"],wareLookupStatus:[1,"wareLookupStatus"]},decls:1,vars:1,template:function(e,o){e&1&&v(0,xe,9,4,"div"),e&2&&x(o.wareLookupStatus()==="found"?0:-1)},styles:["th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:10px;border:1px solid #333}"]})};function Fe(r,a){r&1&&(n(0,"div",3),i(1,"Scan or type in a barcode above to look up it up."),t())}function _e(r,a){if(r&1&&(n(0,"h3",0),i(1,"Ware found:"),t(),l(2,"app-ware-item",4),n(3,"h4",5),i(4,"Number of wares to store:"),t(),l(5,"app-update-ware-form",6)),r&2){let e=h();m(2),d("lookedUpWare",e.lookedUpWare())("wareLookupStatus",e.wareLookupStatus()),m(3),d("action","increaseQuantity")("barcode",e.barcode())("submitFunction",e.submitWareUpdateFunction())}}function Pe(r,a){if(r&1&&(n(0,"h3",0),i(1," Ware not found. Create it? "),t(),l(2,"app-create-ware-form",7)),r&2){let e=h();m(2),d("barcode",e.barcode())("submitFunction",e.submitWareCreateFunction())}}var K=class r{barcode=V("");lookedUpWare=s(null);wareLookupStatus=s("notSearched");submitWareCreateFunction=s(()=>{});submitWareUpdateFunction=s(()=>{});static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-ware-lookup"]],inputs:{barcode:[1,"barcode"],lookedUpWare:[1,"lookedUpWare"],wareLookupStatus:[1,"wareLookupStatus"],submitWareCreateFunction:[1,"submitWareCreateFunction"],submitWareUpdateFunction:[1,"submitWareUpdateFunction"]},outputs:{barcode:"barcodeChange"},decls:10,vars:2,consts:[[1,"text-xl","font-semibold","text-gray-800","mb-4","mt-4"],["icon","barcode"],[3,"barcodeChange","barcode"],[1,"mb-4","mt-4"],[3,"lookedUpWare","wareLookupStatus"],[1,"text-xl","font-semibold","mb-4","mt-2"],[3,"action","barcode","submitFunction"],[3,"barcode","submitFunction"]],template:function(e,o){e&1&&(n(0,"div")(1,"h3",0),l(2,"fa-icon",1),i(3," Look up barcode "),l(4,"fa-icon",1),t(),n(5,"app-barcode-form",2),g("barcodeChange",function(p){return b(o.barcode,p)||(o.barcode=p),p}),t()(),n(6,"div"),v(7,Fe,2,0,"div",3)(8,_e,6,5)(9,Pe,3,2),t()),e&2&&(m(5),f("barcode",o.barcode),m(2),x(o.wareLookupStatus()==="notSearched"?7:o.wareLookupStatus()==="found"?8:o.wareLookupStatus()==="notFound"?9:-1))},dependencies:[H,z,J,N,be,fe],encapsulation:2})};var X=class r{http=I(oe);getAll(){return this.http.get(`${P.apiUrl}/wares`).pipe(W({error:a=>console.error(a)}))}getByBarcode(a){return this.http.get(`${P.apiUrl}/wares/${a}`)}post(a){return this.http.post(`${P.apiUrl}/wares`,a).pipe(W({error:e=>console.error(e)}))}patch(a,e){let o={quantityDelta:e};return this.http.patch(`${P.apiUrl}/wares/${a}`,o).pipe(W({error:c=>console.error(c)}))}delete(a){return this.http.delete(`${P.apiUrl}/wares/${a}`).pipe(W({error:e=>console.error(e)}))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=ee({token:r,factory:r.\u0275fac,providedIn:"root"})};var we=class r{barcode=te("");lookedUpWare=O(()=>this.lookedUpWareResource.hasValue()?this.lookedUpWareResource.value():null);wareLookupStatus=O(()=>this.barcode()===""?"notSearched":this.lookedUpWare()===null?"notFound":"found");wareList=O(()=>this.wareListResource.hasValue()?this.wareListResource.value():[]);wareService=I(X);notificationService=I(ge);lookedUpWareResource=Y({params:()=>this.barcode(),stream:({params:a})=>this.wareService.getByBarcode(a)});wareListResource=Y({stream:()=>this.wareService.getAll().pipe(W({error:()=>this.notificationService.showError("Error: failed getting all wares")}))});handleWareCreateFormSubmit=a=>{this.wareService.post(a).subscribe({next:()=>{this.wareListResource.reload(),this.lookedUpWareResource.reload(),this.notificationService.showSuccess("New ware successfully created")},error:()=>{this.notificationService.showError("Error: failed creating new ware")}})};handleWareUpdateFormSubmit=(a,e,o)=>{a==="decreaseQuantity"&&(o*=-1),this.wareService.patch(e,o).subscribe({next:()=>{this.wareListResource.reload(),this.lookedUpWareResource.reload(),this.notificationService.showSuccess("Ware successfully updated")},error:c=>{c.status===422?this.notificationService.showError("Error: likely quantity too low to process packing order"):this.notificationService.showError("Error: failed updating ware")}})};handleWareDeleteSubmit=a=>{this.wareService.delete(a).subscribe({next:()=>{this.wareListResource.reload(),this.lookedUpWareResource.reload(),this.notificationService.showSuccess("Ware successfully deleted")},error:()=>this.notificationService.showError("Error: failed deleting ware")})};static \u0275fac=function(e){return new(e||r)};static \u0275cmp=u({type:r,selectors:[["app-ware-management"]],decls:8,vars:8,consts:[[1,"text-4xl","font-semibold","text-gray-800","mb-4","mt-4"],[1,"flex"],[3,"barcodeChange","barcode","lookedUpWare","wareLookupStatus","submitWareCreateFunction","submitWareUpdateFunction"],[3,"wareList","submitWareUpdateFunction","submitWareDeleteFunction"]],template:function(e,o){e&1&&(n(0,"header")(1,"h1",0),i(2,"Ware Management"),t()(),n(3,"main")(4,"div",1)(5,"app-ware-lookup",2),g("barcodeChange",function(p){return b(o.barcode,p)||(o.barcode=p),p}),t()(),n(6,"div"),l(7,"app-ware-list",3),t()()),e&2&&(m(5),f("barcode",o.barcode),d("lookedUpWare",o.lookedUpWare())("wareLookupStatus",o.wareLookupStatus())("submitWareCreateFunction",o.handleWareCreateFormSubmit)("submitWareUpdateFunction",o.handleWareUpdateFormSubmit),m(2),d("wareList",o.wareList())("submitWareUpdateFunction",o.handleWareUpdateFormSubmit)("submitWareDeleteFunction",o.handleWareDeleteSubmit))},dependencies:[$,K],styles:["header[_ngcontent-%COMP%], main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;margin:20px 0}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin:10px 0}"]})};export{we as WareManagementContainerComponent};
